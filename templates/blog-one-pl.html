{% extends 'base.html' %}

{% block title %}DMD BLOG - {{choiced['title']}} {% endblock %}

{% block meta_tags %}
    <meta property="og:url" content="https://www.elitehome.pl/blog-one-pl?post={{choiced['id']}}" /> 
    <meta property="og:type" content="website" />
    <meta property="og:title" content="DMD DOMY - {{choiced['title']}}" />
    <meta property="og:description" content="DMD to filozofia! Zaufaj nam – DMD Domy to nie tylko firma budowlana, to gwarancja profesjonalizmu i satysfakcji. Zacznijmy razem budować Twój wymarzony świat!" />
    <meta property="og:image" content="https://dmddomy.pl/static/images/logo_dmd_elitehome.png" /> 
    <meta name="description" content="{{choiced['highlight']}}">
    <meta name="author" content="{{choiced['author']}}">
    <meta name="keywords" content="DMD Domy, budowa domów, firma budowlana, profesjonalizm, satysfakcja">
    <meta name="robots" content="index, follow">
    <meta name="revisit-after" content="7 days">
{% endblock %}

{% block content %}
<!--A FEW WORDS-->
<section class="section">
    <div class="container text-center text-lg-start">
      <div class="image-wrap-1"><img src="{{choiced['mainFoto']}}" alt=""/></div>
      <h3 class="text-primary padding-top-standard">{{choiced['title']}}</h3>
      <div class="gray-style">
        <a href="#">
          <i class="fa fa-user"></i> {{choiced['author']}}
        </a>
        | 
        <a href="#">
          <i class="fa fa-calendar"></i> {{choiced['data']}} 
        </a>
        | 
        <a href="#">
          <i class="fa fa-commenting-o"></i> {{ choiced['len'] }}
        </a>
      </div>
      <hr />
      <div class="row">
        <div class="col-lg-12 col-md-12">
          <p>
            {{choiced['introduction']}} 
          </p>
        </div>
      </div>
    </div>
</section>
<!--OFFERING GREAT EXPERTISE-->
<section class="section margin-top-standard">
    <div class="container wow fadeInLeft" data-wow-delay=".5s" data-wow-duration="1s">
      <div class="box-lg blog-highlight-background">
        <div class="box-lg_body inset-3 text-center text-md-start">
            <blockquote class="quote padding-standard blog-highlight-font">
                <p class="">
                    {{choiced['highlight']}}
                </p>
            </blockquote>
        </div>
      </div>
    </div>
</section>
  
<section class="section padding-standard margin-top-standard">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-md-8 wow fadeInUp">
                <!-- {{choiced['additionalList']}} -->
                <ul>
                    {% for point in choiced['additionalList'] %}
                    <li class="margin-top-standard">
                        {{point}}
                    </li>
                    {% endfor %}
                </ul>
            </div>
            <div class="col-lg-4 col-md-4 margin-top-standard">
                <img src="{{choiced['contentFoto']}}" alt=""/>
            </div>
        </div>
    </div>
</section>
<!--OUR CUSTOMERS-->
<section class="well-2 well-2--inset-1 text-xs-center">
    <div class="container">
      <!-- <h3 class="text-primary">TAGI</h3> -->
      
      <div class="row">            
        <div class="col-lg-8 col-md-8 col-sm-12 wow fadeInUp" data-wow-delay=".3s" data-wow-duration="1s">
            <h2 class="small margin-top-standard">TAGI:</h2>
            
            <ul class="inline-list">
                {% for tag in choiced['tags'] %}
                <li><a href="#">{{tag}}</a></li>
                {% endfor %}
            </ul>
        </div>
        
        <div class="col-lg-4 col-md-4 col-sm-8 wow fadeInUp" data-wow-delay=".3s" data-wow-duration="1s">
            <h2 class="small  margin-top-standard">UDOSTĘPNIJ:</h2>
            <ul class="inline-list bg-white ">
                <li>
                    <a 
                        class="link-dark icon fa fa-facebook" 
                        href="https://www.facebook.com/sharer/sharer.php?u=https://www.elitehome.pl/blog-one-pl?post={{choiced['id']}}&title={{choiced['title']}}&description={{choiced['highlight']}}&picture=https://dmddomy.pl/static/images/logo_dmd_elitehome.png"
                        target="_blank">
                    </a>
                </li>
                <li>
                    <a 
                        class="link-dark icon fa fa-twitter" 
                        href="https://twitter.com/intent/tweet?text={{choiced['highlight']}}&url=https://www.elitehome.pl/blog-one-pl?post={{choiced['id']}}" 
                        target="_blank">
                    </a>
                </li>
            </ul>
        </div>
        <hr class="margin-top-standard"/>
      </div>
    </div>
</section>
<div class="margin-top-standard">
    <div class="container y-center">
        <h3 class="text-primary padding-top-standard">Autor</h3>
        <div class="stick-all y-center  shadow-lg p-3 mb-5 bg-body-tertiary rounded">
            <div class="padding-standard">
                <img class="avatar" src="{{choiced['author_avatar']}}" alt="" />
            </div>
            <div class="padding-standard width-standard">
                <h5 class="normal">{{choiced['author']}}</h5>
                <p>
                    {{choiced['author_about']}}
                </p>
            </div>
            <div class="margin-left-65">
                <ul class="inline-list bg-white">
                    {% if choiced['author_facebook'] != '' %}
                    <li>
                        <a class="link-dark icon fa fa-facebook" href="{{choiced['author_facebook']}}" target="_blank"></a>
                    </li>
                    {% endif %}
                    {% if choiced['author_instagram'] != '' %}
                    <li>
                        <a class="link-dark icon fa fa-instagram" href="{{choiced['author_instagram']}}" target="_blank"></a>
                    </li>
                    {% endif %}
                    {% if choiced['author_twitter'] != '' %}
                    <li>
                        <a class="link-dark icon fa fa-twitter" href="{{choiced['author_twitter']}}" target="_blank"></a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>
</div>
{% if choiced['len'] > 0 %}
<div class="margin-top-standard">
    <div class="container">
        <h3 class="text-primary padding-top-standard">Komentarze</h3>
        {% for comm in choiced['comments'].values() %}
        <div class="stick-all shadow-sm p-3 mb-5 bg-body-tertiary rounded margin-left-65 margin-top-standard">
            <div class="padding-standard">
                <img class="avatar" src="{{comm['avatar']}}" alt="" />
            </div>
            <div class="padding-standard width-full">
                <div class="stick-all">
                    <div class="y-top font-title padding-top-small">
                        <h5 class="normal">{{comm['user']}}</h5>
                    </div>
                    <div class="margin-left-standard font-strong y-top">
                        <p>{{comm['data-time']}}</p>
                    </div>
                </div>
                <p>
                    {{comm['message']}}
                </p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
<div class="margin-top-standard">
    <div class="container">
        <h3 class="text-primary padding-top-standard">Komentuj Post</h3>
        <div class="stick-all shadow-sm p-3 mb-5 bg-body-tertiary rounded margin-top-standard">
            <form class="width-full" id="Comments">

                <div class="stick-all">
                    <div class="form-floating mb-3 width-full">
                        <input type="text" class="form-control" name="Name" id="floatingInput" placeholder="Imię i nazwisko" required>
                        <label for="floatingInput">Imię i nazwisko</label>
                    </div>
                    <div class="form-floating mb-3 width-full margin-left-standard">
                        <input type="email" class="form-control" name="Email" id="floatingInput" placeholder="name@example.com" required>
                        <label for="floatingInput">Adres E-mail</label>
                    </div>
                </div>
                <div class="form-floating">
                    <textarea class="form-control" placeholder="Leave a comment here" name="Comment" id="floatingTextarea2" style="height: 100px" required></textarea>
                    <label for="floatingTextarea2">Komentarz</label>
                </div>
                <div class="margin-top-standard form-floating">
                    <input type="hidden" name="id" value="{{choiced['id']}}" />
                    <button class="btn btn-primary btn-md button-primary font-button" type="submit" id="przycisk">
                        Komentuj Post<span class="insider"></span>
                    </button>
                </div>
                <div class="margin-top-standard" id="komunikat_z_serwera"></div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
{% block bottom_script %}
<script>
    document.addEventListener("DOMContentLoaded", function() {
        document.getElementById('Comments').addEventListener('submit', function(e) {
            e.preventDefault(); // Zapobiegaj domyślnej akcji formularza
            const formData = new FormData(this); // Użyj 'this', aby odnieść się do formularza
            const jsonFormData = Object.fromEntries(formData.entries());

            fetch('/add-comm-pl', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(jsonFormData) // Przekazuj dane z formularza
            })
            .then(response => response.json())
            .then(data => {
                // console.log(data);

                const komunikatDiv = document.getElementById("komunikat_z_serwera");
                if (komunikatDiv) {
                    komunikatDiv.innerHTML = data.message;
                    // Ustawienie koloru komunikatu na podstawie wartości 'success'
                    if(data.success) {
                        komunikatDiv.style.color = "green"; // Sukces - zielony
                        document.getElementById('Comments').reset();
                        setTimeout(function() { // Opóźnienie przed przeładowaniem, aby użytkownik zdążył zobaczyć komunikat
                            window.location.reload();
                        }, 1500);
                    } else {
                        komunikatDiv.style.color = "red"; // Niepowodzenie - czerwony
                    }
                    setTimeout(function() {
                        komunikatDiv.innerHTML = '';
                    }, 5000);
                }
            })
            .catch((error) => {
                console.error('Error:', error);
            });
        });
    });
</script>
    
{% endblock %}